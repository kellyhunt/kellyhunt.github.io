<!DOCTYPE html>
<html>

<head>
<script type="text/javascript" src="https://sylvan.brightpattern.com/agentdesktop/libs/servicepatternapi-dev.js"></script>
<script type="text/javascript">

    function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
            results = regex.exec(location.search);
        return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }


    var startRecording = function() {
        window.bpspat.api.startCurrentCallRecording();
    }
    var stopRecording = function() {
        window.bpspat.api.stopCurrentCallRecording();
    }



    var dialNumber = function() {
        window.bpspat.api.dialNumber("18017170288");
    }
	var setNotes = function() {
        window.bpspat.api.setNotes("Test notes");
    }
	var setDisposition = function() {
        window.bpspat.api.setDisposition("1001");
    }
	var completeInteraction = function() {
        window.bpspat.api.completeInteraction();
    }
	var completeInteractionWithDisp = function() {
        window.bpspat.api.completeInteractionWithDisp("1001");
    }

	// call recordings

	function callback(data) {
		alert(data)
    	//alert(data.item_id + "|" + data.recording + "|" + data.muted)
	}


	var getCallRecordingStatus = function() {
		window.bpspat.api.getCallRecordingStatus(callback)
	}
	var startCallRecording = function() {
		window.bpspat.api.startCallRecording(callback)
	}
	var stopCallRecording = function() {
		window.bpspat.api.stopCallRecording(callback)
	}
	var muteCallRecording = function() {
		window.bpspat.api.muteCallRecording(callback)
	}
	var unmuteCallRecording = function() {
		window.bpspat.api.unmuteCallRecording(callback)
	}

</script>
</head>

<body>


<h1> Test </h1>
    <div>Interaction:<span id="interaction_id"/></div>
    <div>Agent:<span id="agent_id"/></div>
    <div>Service:<span id="service_name"/></div>
    <div>ANI:<span id="ani"/></div>
    
	<script>
    function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
            results = regex.exec(location.search);
        return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }
	document.getElementById("interaction_id").innerHTML = getParameterByName('interaction_id');
	document.getElementById("agent_id").innerHTML = getParameterByName('agent_id');
	document.getElementById("service_name").innerHTML = getParameterByName('service_name');
	document.getElementById("ani").innerHTML = getParameterByName('ani');
	</script>


<div><button id="muteCallRecording" onclick="muteCallRecording()">muteCallRecording</button>	</div>
<div><button id="unmuteCallRecording" onclick="unmuteCallRecording()">unmuteCallRecording</button></div>



</html>